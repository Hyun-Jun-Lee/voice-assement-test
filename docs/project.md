
# 프로젝트 소개

사용자가 음성만으로 심리검사를 수행할 수 있는 웹 애플리케이션입니다. 
"3번 문항 A로 체크해줘", "다음 문항으로 넘어가줘"와 같은 자연어 음성 명령으로 검사를 진행할 수 있습니다.

### 핵심 기능
- 자연어 명령 인식 및 처리 (LLM Tool Calling)
- 실시간 UI 반영
- 검사 진행 상황 추적
- 단계별 개발 접근 (텍스트 → 음성)

## 프로젝트 구조

```
psych-voice-test/
├── src/
│   ├── lib/                          # 재사용 가능한 코드 (Python의 utils/, services/ 같은 역할)
│   │   ├── components/               # Svelte 컴포넌트 (UI 조각들)
│   │   │   ├── test/                 # 검사 관련 컴포넌트
│   │   │   │   ├── QuestionCard.svelte       # 문항 표시
│   │   │   │   ├── QuestionNavigation.svelte # 문항 네비게이션
│   │   │   │   ├── AnswerChoices.svelte      # 답변 선택지
│   │   │   │   ├── ProgressBar.svelte        # 진행률 바
│   │   │   │   └── AnswerSummary.svelte      # 답변 현황 요약
│   │   │   │
│   │   │   ├── ui/                   # 공통 UI 컴포넌트
│   │   │   │   ├── TextInput.svelte          # 텍스트 입력 (명령어)
│   │   │   │   ├── Button.svelte             # 버튼
│   │   │   │   ├── Message.svelte            # 메시지 표시
│   │   │   │   └── Card.svelte               # 카드 레이아웃
│   │   │   │
│   │   │   └── debug/                # 디버그용 컴포넌트
│   │   │       ├── DebugLog.svelte            # 로그 표시
│   │   │       └── StateViewer.svelte         # 상태 확인
│   │   │
│   │   ├── stores/                   # 상태 관리 (Python의 전역 변수 + 리액티브)
│   │   │   ├── testStore.js          # 검사 진행 상태
│   │   │   ├── commandStore.js       # 명령 처리 상태
│   │   │   └── uiStore.js            # UI 상태
│   │   │
│   │   ├── services/                 # 비즈니스 로직 (Python의 service layer)
│   │   │   └── commandProcessor.js   # LLM Tool Calling 처리
│   │   │
│   │   ├── data/                     # 정적 데이터 (Python의 constants.py)
│   │   │   ├── questions.js          # 더미 문항 데이터
│   │   │   └── constants.js          # 상수
│   │   │
│   │   └── utils/                    # 유틸리티 함수
│   │       └── helpers.js            # 헬퍼 함수
│   │
│   ├── routes/                       # 페이지 라우팅 (Python FastAPI의 router 같은 역할)
│   │   ├── +layout.svelte            # 전체 레이아웃 (모든 페이지 공통)
│   │   ├── +page.svelte              # 홈페이지 (/)
│   │   └── test/                     # 검사 페이지 (/test)
│   │       └── +page.svelte
│   │
│   ├── app.html                      # HTML 템플릿 (index.html)
│   └── app.css                       # 전역 CSS
│
├── static/                           # 정적 파일 (이미지, 폰트 등)
│   └── favicon.png
│
├── .env                              # 환경 변수
├── .env.example                      # 환경 변수 예시
├── svelte.config.js                  # SvelteKit 설정
├── vite.config.js                    # Vite 번들러 설정
└── package.json                      # 의존성 관리 (Python의 requirements.txt)
```


# 기능 요구사항

## 1. 음성 인터페이스 기반 심리검사 수행 및 제어

### 1.1. 자연어 음성 기반 검사 수행

#### 1.1.1. 음성 문항 응답
- 사용자가 음성으로 발화하여 각 심리검사 문항에 답변할 수 있어야 함
- 다양한 표현 방식의 답변을 인식하고 처리할 수 있어야 함
  - 예: "A", "첫 번째", "매우 그렇다" 등

#### 1.1.2. 음성 검사 시작
- 사용자가 음성으로 특정 검사를 요청하면 해당 검사를 시작할 수 있어야 함
  - 예: "스트레스 검사 시작해줘"
- 검사 시작 전 검사에 대한 안내를 제공해야 함

### 1.2. 동적 검사 흐름 제어

#### 1.2.1. 문항 이동
- **특정 문항 이동**: 사용자가 특정 문항 번호로 이동을 요청할 수 있어야 함
  - 예: "3번 문항으로 돌아가 줘", "5번으로 가줘"
- **순차 이동**: 다음/이전 문항으로 순차적으로 이동할 수 있어야 함
  - 예: "다음 문항", "이전 문항"
- 이동 시 해당 문항을 다시 제시해야 함

#### 1.2.2. 검사 상태 확인
- **진행 상황 조회**: 사용자가 검사 진행 상태를 질문할 수 있어야 함
  - 예: "몇 문항 남았어?", "몇 퍼센트 진행했어?"
- **현재 위치 확인**: 현재 어느 문항에 있는지 확인할 수 있어야 함
  - 예: "지금 몇 번 문항이야?"
- 음성으로 상태 정보를 안내해야 함

#### 1.2.3. 검사 제어
- **문항 반복**: 현재 문항을 다시 들을 수 있어야 함
  - 예: "다시 읽어줘", "문항 반복"
- **일시 중단**: 검사를 일시 중단하고 나중에 재개할 수 있어야 함
  - 예: "10분만 쉬고 싶어", "잠깐 멈춰줘"
- **순서 변경**: 문항 순서를 자유롭게 이동할 수 있어야 함
- **건너뛰기**: 특정 문항을 건너뛸 수 있어야 함 (선택사항)
  - 예: "이 문항 넘어갈게"

#### 1.2.4. 과거 응답 조회
- 사용자가 이전에 입력한 답변을 조회할 수 있어야 함
  - 예: "3번 문항에 내가 뭐라고 했어?"
- 전체 답변 현황을 조회할 수 있어야 함
  - 예: "지금까지 답변한 거 알려줘"
- 음성으로 답변 내용을 안내해야 함

## 2. AI 기반 검사 결과 해설 및 질의응답

### 2.1. 음성 기반 결과 해설

#### 2.1.1. 결과 보고서 음성 해설
- 심리검사 완료 후 결과를 음성으로 해설해야 함
- 검사 결과의 주요 내용을 자연어로 설명해야 함
  - 점수, 해석, 의미 등
- 단계적으로 결과를 설명할 수 있어야 함
  - 전체 요약 → 상세 설명 → 항목별 분석

#### 2.1.2. 사용자 맞춤형 설명
- **난이도 조절**: 사용자의 이해 수준에 맞춰 설명의 난이도를 조절할 수 있어야 함
  - 쉬운 용어 사용, 비유 활용, 반복 설명 등
- **설명 방식 선택**: 다양한 설명 방식을 제공할 수 있어야 함
  - 간단한 요약, 상세한 설명, 예시 중심 설명 등
- 지적·인지 능력이 낮은 사용자도 이해할 수 있도록 해야 함

### 2.2. 실시간 질의응답 (QA)

#### 2.2.1. 자연어 질문 응답
- 사용자가 검사 결과에 대해 자연어로 질문할 수 있어야 함
  - 예: "자기효능감이 낮다는 건 무슨 의미야?"
  - 예: "내 점수가 낮은 이유는 뭐야?"
  - 예: "어떻게 개선할 수 있어?"
- 실시간으로 답변을 생성하여 음성으로 응답해야 함
- 다양한 질문 유형을 처리할 수 있어야 함
  - 정의 질문, 해석 질문, 조언 요청 등

#### 2.2.2. 전문 지식 기반 답변
- **정확한 정보 제공**: 심리 전문 지식을 기반으로 답변해야 함
- **신뢰도 높은 답변**: 환각(Hallucination) 없이 검증된 정보만 제공해야 함
- **근거 제시**: 답변에 대한 근거나 출처를 제시할 수 있어야 함 (선택사항)
- **한계 인지**: 답변할 수 없는 질문에 대해서는 명확히 한계를 밝혀야 함
  - 예: "이 질문은 전문가 상담이 필요합니다"